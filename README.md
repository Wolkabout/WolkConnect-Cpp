# WolkConnector C++
WolkAbout C++ Connector library for connecting devices to WolkAbout IoT platform.

Prerequisite
------
Following tools/libraries are required in order to build WolkAbout C++ connector

* autotools
* autoconf
* m4
* zlib1g-dev

Former can be installed on Debian based system from terminal by invoking

`apt-get install autotools-dev autoconf m4 zlib1g-dev`

Afterwards dependencies are built, and Makefile build system is generated by invoking
`./configure`

Generated build system is located inside 'out' directory


WolkAbout C++ Connector library, and example are built from 'out' directory by invoking
`make` in terminal

Example Usage
-------------
**Establishing connection with WolkAbout IoT platform:**
```cpp
wolkabout::Device device;
device.setDeviceKey("DEVICE_KEY")
    .setDevicePassword("DEVICE_PASSWORD")
    .setActuatorReferences({"ACTUATOR_REFERENCE_ONE", "ACTUATOR_REFERENCE_TWO"});

std::unique_ptr<wolkabout::Wolk> wolk =
    wolkabout::Wolk::connectDevice(device)
        .actuationHandler([](const std::string& reference, const std::string& value) -> void {
            std::cout << "Actuation request received - Reference: " << reference << " value: " << value << std::endl;
        })

        .actuatorStatusProvider([](const std::string& reference) -> wolkabout::ActuatorStatus {
            if (reference == "ACTUATOR_REFERENCE_ONE") {
                wolkabout::ActuatorStatus actuatorStatus("65", wolkabout::ActuatorStatus::State::READY);
                return actuatorStatus;
            } else if (reference == "ACTUATOR_REFERENCE_TWO") {
                wolkabout::ActuatorStatus actuatorStatus("false", wolkabout::ActuatorStatus::State::READY);
                return actuatorStatus;
            }

            wolkabout::ActuatorStatus actuatorStatus("", wolkabout::ActuatorStatus::State::READY);
            return actuatorStatus;
        })
        .connect();
```

**Publishing sensor readings:**
```cpp
wolk->addSensorReading("TEMPERATURE_REF", 23.4);
wolk->addSensorReading("BOOL_SENSOR_REF", true);
```

**Publishing actuator statuses:**
```cpp
wolk->publishActuatorStatus("ACTUATOR_REFERENCE_ONE ");
```
This will invoke the ActuationStatusProvider to read the actuator status,
and publish actuator status.

**Publishing events:**
```cpp
wolk->addAlarm("ALARM_REF", "ALARM_MESSAGE_FROM_CONNECTOR");
```

Sensor readings, actuator statuses, and events are automatically pushed to WolkAbout IoT platform every 200 milliseconds,
hence no action other than *addSensorReading*, *publishActuatorStatus*, or *addEvent* is required.

**Disconnecting from the platform:**
```cpp
wolk->disconnect();
```
